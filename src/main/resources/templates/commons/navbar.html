<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
  layout:decorate="~{exskel}"
>
  <nav
    class="main-header navbar navbar-expand navbar-white navbar-light sticky-top"
    th:fragment="navbar"
  >
    <!-- hamburger -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a href="#" class="nav-link" data-widget="pushmenu">
          <i class="fas fa-bars"></i>
        </a>
      </li>
    </ul>

    <!-- searchbar -->
    <form
      th:action="@{/search}"
      class="form-inline mx-3 d-inline w-100"
      role="form"
      method="get"
    >
      <div class="input-group input-group-sm">
        <div class="input-group-append mr-2">
          <select
            name="target"
            id=""
            class="form-control form-control-sm form-control-navbar"
            style="
              outline: none;
              box-shadow: none;
              background-color: #eeeeee;
              -webkit-appearance: none;
            "
          >
            <option th:if="${'posts'.equals(#httpServletRequest.getParameter('target'))}" value="posts" selected="selected">posts</option>
            <option th:unless="${'posts'.equals(#httpServletRequest.getParameter('target'))}" value="posts">posts</option>
            <option th:if="${'channels'.equals(#httpServletRequest.getParameter('target'))}" value="channels" selected="selected">channels</option>
            <option th:unless="${'channels'.equals(#httpServletRequest.getParameter('target'))}" value="channels">channels</option>
            <option th:if="${'users'.equals(#httpServletRequest.getParameter('target'))}" value="users" selected="selected">users</option>
            <option th:unless="${'users'.equals(#httpServletRequest.getParameter('target'))}" value="users">users</option>
            <option th:if="${'tags'.equals(#httpServletRequest.getParameter('target'))}" value="tags" selected="selected">tags</option>
            <option th:unless="${'tags'.equals(#httpServletRequest.getParameter('target'))}" value="tags">tags</option>
          </select>
        </div>
        <input
          type="search"
          class="form-control form-control-navbar rounded"
          placeholder="search"
          aria-label="search"
          name="query"
          th:value="${#httpServletRequest.getParameter('query')}"
        />
        <div class="input-group-append">
          <button class="btn btn-navbar" type="submit">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
    </form>

    <!-- right menu -->
    <ul class="navbar-nav ml-auto">
      <!-- only auth -->
      <button
        sec:authorize="!isAnonymous()"
        class="btn btn-outline-none border-0"
        id="notify-btn"
        type="button"
        data-toggle="modal"
        data-target="#messages_modal"
      >
        <i class="far fa-bell"></i>
      </button>
      <!-- end only auth -->
      <!-- guest only -->
      <th:block sec:authorize="isAnonymous()">
        <li class="nav-item">
          <!-- login -->
          <a th:href="@{/login}" class="nav-link"
          ><i class="fas fa-sign-in-alt"></i
          ></a>
        </li>
        <li class="nav-item">
          <!-- register -->
          <a th:href="@{/register}" class="nav-link"
          ><i class="fas fa-user-plus"></i
          ></a>
        </li>
      </th:block>
      <!-- end guest only -->
      <!-- auth only -->
      <li class="nav-item" sec:authorize="!isAnonymous()">
        <!-- logout -->
        <a href="javascript:void()" class="nav-link" onclick="$('#logout-form').submit();">
          <i class="fas fa-sign-out-alt"></i>
        </a>
        <form
          th:action="@{/logout}"
          id="logout-form"
          method="post"
          style="display: none"
        ></form>
      </li>
      <!-- end only auth -->
    </ul>
  </nav>
</html>
